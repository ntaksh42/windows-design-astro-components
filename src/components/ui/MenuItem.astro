---
/**
 * MenuItem - メニュー内の項目
 */
interface Props {
  /** 項目のラベル */
  label?: string;
  /** ショートカットキー表示 */
  shortcut?: string;
  /** セパレーター（区切り線）として表示 */
  separator?: boolean;
  /** 無効化 */
  disabled?: boolean;
  /** サブメニューを持つ */
  hasSubmenu?: boolean;
}

const {
  label = '',
  shortcut,
  separator = false,
  disabled = false,
  hasSubmenu = false
} = Astro.props;
---

{separator ? (
  <div class="menu-separator"></div>
) : (
  <div class={`menu-item ${disabled ? 'disabled' : ''} ${hasSubmenu ? 'has-submenu' : ''}`}>
    <span class="menu-item-label">{label}</span>
    <span class="menu-item-right">
      {shortcut && <span class="menu-item-shortcut">{shortcut}</span>}
      {hasSubmenu && <span class="menu-item-arrow">▶</span>}
    </span>

    {hasSubmenu && (
      <div class="submenu">
        <slot />
      </div>
    )}
  </div>
)}

<style>
  .menu-item {
    padding: 4px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: default;
    gap: 16px;
    position: relative;
  }

  .menu-item:hover:not(.disabled) {
    background: #0078d4;
    color: white;
  }

  .menu-item.disabled {
    color: #a0a0a0;
    cursor: default;
  }

  .menu-item-label {
    flex: 1;
  }

  .menu-item-right {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .menu-item-shortcut {
    font-size: 12px;
    color: #666;
    white-space: nowrap;
  }

  .menu-item:hover:not(.disabled) .menu-item-shortcut {
    color: rgba(255, 255, 255, 0.8);
  }

  .menu-item-arrow {
    font-size: 10px;
    color: #666;
  }

  .menu-item:hover:not(.disabled) .menu-item-arrow {
    color: rgba(255, 255, 255, 0.8);
  }

  .submenu {
    /* デフォルトでは非表示 */
    display: none;
    position: absolute;
    top: 0;
    left: 100%;
    background: #f0f0f0;
    border: 1px solid #acacac;
    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
    min-width: 180px;
    max-width: 300px;
    width: max-content;
    padding: 2px 0;
    z-index: 1001;
    margin-left: -1px;
    /* サブメニュー内の文字色を黒に戻す */
    color: #000;
  }

  /* 親メニュー項目にホバーした時だけサブメニューを表示 */
  .menu-item.has-submenu:hover > .submenu {
    display: block;
  }

  /* サブメニュー内のショートカットも黒に */
  .submenu .menu-item-shortcut {
    color: #666;
  }

  .menu-separator {
    height: 1px;
    background: #d0d0d0;
    margin: 4px 8px;
  }
</style>
